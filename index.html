<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù…Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <style>
        body { background: #1a1a1a; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; font-family: sans-serif; transition: 0.5s; text-align: center; }
        #clock { font-size: 60px; font-weight: bold; text-shadow: 0 0 20px rgba(255,255,255,0.2); }
        #date { font-size: 18px; color: #aaa; margin-bottom: 15px; }
        .temp-box { background: rgba(255,255,255,0.1); padding: 8px 20px; border-radius: 50px; margin-bottom: 15px; font-size: 16px; border: 1px solid #444; }
        .alarm-box { background: #252525; padding: 20px; border-radius: 20px; margin-bottom: 20px; border: 2px solid #0084ff; width: 85%; max-width: 320px; }
        input[type="time"] { padding: 12px; border-radius: 10px; border: none; width: 90%; font-size: 20px; text-align: center; background: #fff; }
        .links { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 90%; max-width: 400px; }
        .links a { padding: 15px; color: white; text-decoration: none; border-radius: 15px; text-align: center; font-weight: bold; font-size: 14px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .fb { background: #1877f2; } .ms { background: #0084ff; } .yt { background: #ff0000; } .gg { background: #4285f4; }
        .btn-theme { background: none; border: 1px solid #666; color: #666; padding: 5px 15px; border-radius: 20px; margin-top: 15px; cursor: pointer; }
    </style>
</head>
<body onclick="enableAudio()">

    <div class="temp-box">ğŸŒ¡ï¸ Ø§Ù„Ø­Ø±Ø§Ø±Ø© ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ: <span id="temp">24Â°C</span></div>
    <div id="clock">00:00:00</div>
    <div id="date">Ø§Ù„ØªØ§Ø±ÙŠØ®</div>

    <div class="alarm-box">
        <div>â° Ù…Ù†Ø¨Ù‡ Ø§Ù„ÙØ¬Ø± (Ù…Ø­ÙÙˆØ¸)</div>
        <input type="time" id="alarmTime" onchange="saveAlarm()">
        <div id="alarmStatus" style="font-size: 12px; margin-top: 8px; color: #00ff00;"></div>
    </div>

    <div class="links">
        <a href="https://facebook.com" target="_blank" class="fb">Facebook</a>
        <a href="https://messenger.com" target="_blank" class="ms">Messenger</a>
        <a href="https://youtube.com" target="_blank" class="yt">YouTube</a>
        <a href="https://google.com" target="_blank" class="gg">Google</a>
    </div>

    <button class="btn-theme" onclick="document.body.style.backgroundColor='#'+Math.floor(Math.random()*16777215).toString(16)">ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ©</button>

    <script>
        // 1. Ø­ÙØ¸ ÙˆØ§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù†Ø¨Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        function saveAlarm() {
            const time = document.getElementById('alarmTime').value;
            localStorage.setItem('fajrAlarm', time);
            document.getElementById('alarmStatus').textContent = "ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø¨Ù‡ Ø¨Ù†Ø¬Ø§Ø­ âœ…";
        }

        function loadAlarm() {
            const savedTime = localStorage.getItem('fajrAlarm');
            if (savedTime) {
                document.getElementById('alarmTime').value = savedTime;
            }
        }

        // 2. Ø§Ù„ØµÙˆØª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ (Ø¹Ù…Ø±.. Ø¹Ù…Ø±.. Ø§Ø³ØªÙŠÙ‚Ø¸)
        function playAlarm() {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance("Ø¹Ù…Ø± . . Ø¹Ù…Ø± . . Ø¹Ù…Ø± Ø§Ø³ØªÙŠÙ‚Ø¸ Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„ÙØ¬Ø±");
                utterance.lang = 'ar-SA';
                utterance.rate = 0.8; // Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØª Ø£Ø«Ù‚Ù„ ÙˆØ£Ø®Ø´Ù† Ù‚Ù„ÙŠÙ„Ø§Ù‹
                utterance.pitch = 0.9; 
                window.speechSynthesis.speak(utterance);
            }
        }

        // 3. ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆÙØ­Øµ Ø§Ù„Ù…Ù†Ø¨Ù‡
        function update() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString();
            document.getElementById('date').textContent = now.toLocaleDateString('ar-EG', {weekday:'long', day:'numeric', month:'long'});

            const savedAlarm = localStorage.getItem('fajrAlarm');
            const currentTime = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');

            if (savedAlarm === currentTime && now.getSeconds() === 0) {
                playAlarm();
            }
        }

        // 4. ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª (Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„)
        function enableAudio() {
            window.speechSynthesis.cancel(); 
            console.log("Audio Enabled");
        }

        setInterval(update, 1000);
        loadAlarm();
        update();

        // ØªØ¬Ø±Ø¨Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø±Ø§Ø±Ø© (ØªØ­ØªØ§Ø¬ Ø¥Ù†ØªØ±Ù†Øª Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙ‚Ø·)
        fetch('https://wttr.in/?format=%t').then(res => res.text()).then(data => {
            if(data) document.getElementById('temp').textContent = data;
        }).catch(() => {});
    </script>
</body>
</html>