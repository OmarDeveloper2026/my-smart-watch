<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù…Ø± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        body { background: #1a1a1a; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; font-family: sans-serif; transition: 0.5s; text-align: center; overflow: hidden; }
        #clock { font-size: 65px; font-weight: bold; color: #00d4ff; text-shadow: 0 0 15px rgba(0,212,255,0.5); }
        #date { font-size: 20px; color: #888; margin-bottom: 20px; }
        .temp-bar { background: rgba(255,255,255,0.1); padding: 10px 25px; border-radius: 50px; margin-bottom: 20px; font-size: 18px; border: 1px solid #333; }
        .alarm-area { background: #222; padding: 20px; border-radius: 25px; margin-bottom: 25px; border: 2px solid #00d4ff; width: 80%; max-width: 320px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input[type="time"] { padding: 10px; border-radius: 12px; border: none; width: 100%; font-size: 22px; text-align: center; background: #fff; color: #000; box-sizing: border-box; }
        .links-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 90%; max-width: 400px; }
        .links-grid a { padding: 15px; color: white; text-decoration: none; border-radius: 15px; text-align: center; font-weight: bold; font-size: 14px; transition: 0.3s; }
        .fb { background: #1877f2; } .ms { background: #0084ff; } .yt { background: #ff0000; } .gg { background: #4285f4; }
        .links-grid a:active { transform: scale(0.9); }
    </style>
</head>
<body onclick="startAudio()">

    <div class="temp-bar">ğŸŒ¡ï¸ <span id="temp">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...</span></div>
    <div id="clock">00:00:00</div>
    <div id="date">-- --- ----</div>

    <div class="alarm-area">
        <div style="margin-bottom: 10px;">ğŸ”” Ù…Ù†Ø¨Ù‡ Ø§Ù„ÙØ¬Ø± Ø§Ù„Ø«Ø§Ø¨Øª</div>
        <input type="time" id="alarmTime" onchange="setNewAlarm()">
        <div id="msg" style="font-size: 12px; margin-top: 10px; color: #00ff00;"></div>
    </div>

    <div class="links-grid">
        <a href="https://facebook.com" class="fb">Facebook</a>
        <a href="https://messenger.com" class="ms">Messenger</a>
        <a href="https://youtube.com" class="yt">YouTube</a>
        <a href="https://google.com" class="gg">Google</a>
    </div>

    <script>
        // 1. ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ø§Ø¹Ø© Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
        function updateDisplay() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString('ar-EG');
            document.getElementById('date').textContent = now.toLocaleDateString('ar-EG', {weekday:'long', day:'numeric', month:'long'});

            // ÙØ­Øµ Ø§Ù„Ù…Ù†Ø¨Ù‡
            const saved = localStorage.getItem('omar_fajr');
            const current = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
            
            if (saved === current && now.getSeconds() === 0) {
                shout();
            }
        }

        // 2. Ø§Ù„Ù…Ù†Ø¨Ù‡ ÙŠØ­ÙØ¸ Ù„Ù„Ø£Ø¨Ø¯ ÙÙŠ Ø§Ù„Ù‡Ø§ØªÙ
        function setNewAlarm() {
            const t = document.getElementById('alarmTime').value;
            localStorage.setItem('omar_fajr', t);
            document.getElementById('msg').textContent = "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­ âœ…";
        }

        // 3. ØµÙˆØª Ø±Ø¬Ù„ Ù‚ÙˆÙŠ Ù…Ø¹ Ø§Ù„ØªÙˆÙ‚ÙØ§Øª Ø§Ù„ØªÙŠ Ø·Ù„Ø¨ØªÙ‡Ø§
        function shout() {
            if ('speechSynthesis' in window) {
                const text = "Ø¹Ù…Ø± . . . Ø¹Ù…Ø± . . . Ø¹Ù…Ø± Ø§Ø³ØªÙŠÙ‚Ø¸ Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„ÙØ¬Ø±";
                const speech = new SpeechSynthesisUtterance(text);
                speech.lang = 'ar-SA';
                speech.rate = 0.7; // ØµÙˆØª Ø¨Ø·ÙŠØ¡ ÙˆØ®Ø´ÙŠÙ†
                speech.pitch = 0.5; // ØµÙˆØª Ø±Ø¬Ù„ Ø¹Ù…ÙŠÙ‚
                speech.volume = 1;
                window.speechSynthesis.speak(speech);
            }
        }

        // 4. Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø±Ø§Ø±Ø© (ØªØ®Ø²ÙŠÙ† Ø¢Ø®Ø± Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª)
        async function getTemp() {
            try {
                const res = await fetch('https://wttr.in/?format=%t');
                const data = await res.text();
                if (data && !data.includes("Unknown")) {
                    document.getElementById('temp').textContent = "Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø¢Ù†: " + data;
                    localStorage.setItem('last_temp', data);
                }
            } catch (e) {
                const last = localStorage.getItem('last_temp');
                document.getElementById('temp').textContent = last ? "Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«): " + last : "ØªØ­ØªØ§Ø¬ Ø¥Ù†ØªØ±Ù†Øª Ù„Ù„Ø­Ø±Ø§Ø±Ø©";
            }
        }

        function startAudio() { window.speechSynthesis.cancel(); }

        setInterval(updateDisplay, 1000);
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†Ø¨Ù‡ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
        const savedTime = localStorage.getItem('omar_fajr');
        if (savedTime) document.getElementById('alarmTime').value = savedTime;
        
        getTemp();
        updateDisplay();
    </script>
</body>
</html>